{"version":3,"file":"Cart-Y57hbCD2.js","sources":["../../src/components/Projects/Shop/Quantifier/Quantifier.tsx","../../src/components/Projects/Shop/Cart/Cart.tsx"],"sourcesContent":["import { useState, type FunctionComponent } from \"react\";\r\n\r\nexport type Operation = \"decrease\" | \"increase\";\r\n\r\ninterface Props {\r\n  removeProductCallback: (productId: number) => void;\r\n  handleUpdateQuantity: (productId: number, operation: Operation) => void;\r\n  productId: number;\r\n}\r\n\r\nexport const Quantifier: FunctionComponent<Props> = ({\r\n  removeProductCallback,\r\n  handleUpdateQuantity,\r\n  productId,\r\n}) => {\r\n  const [value, setValue] = useState<number>(1);\r\n\r\n  const reduce = (): void => {\r\n    handleUpdateQuantity(productId, \"decrease\");\r\n\r\n    setValue((prevState) => {\r\n      const updatedValue = prevState - 1;\r\n      if (updatedValue === 0) {\r\n        removeProductCallback(productId);\r\n      }\r\n      return updatedValue;\r\n    });\r\n  };\r\n\r\n  const increase = (): void => {\r\n    handleUpdateQuantity(productId, \"increase\");\r\n    setValue((prevState) => prevState + 1);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-x-2\">\r\n      <input type=\"button\" value=\"-\" onClick={reduce} className=\"button\" />\r\n      <input\r\n        type=\"number\"\r\n        step=\"1\"\r\n        max=\"\"\r\n        value={value}\r\n        onChange={(e) => setValue(parseInt(e.target.value))}\r\n        aria-label=\"quantity label\"\r\n        className=\"px-2 py-2 rounded-md outline-1 -outline-offset-1 outline-gray-600 \"\r\n      />\r\n      <input type=\"button\" value=\"+\" onClick={increase} className=\"button\" />\r\n    </div>\r\n  );\r\n};\r\n","import { type Operation, Quantifier } from \"../Quantifier/Quantifier\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { Trans } from \"@lingui/react/macro\";\r\nimport { usePreferences } from \"../../../../hooks/usePreferences\";\r\nimport type { CartProps } from \"../../../../types/cart\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nfunction Cart() {\r\n  const { cart, setCart } = usePreferences();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const navigateToShop = async () => {\r\n    await navigate(\"/projects/shop/\");\r\n  };\r\n\r\n  const handleRemoveProduct = (productId: number): void => {\r\n    setCart((prevCart: CartProps) => {\r\n      const updatedCart = { ...prevCart };\r\n      delete updatedCart[productId];\r\n      return updatedCart;\r\n    });\r\n  };\r\n\r\n  const handleUpdateQuantity = (productId: number, operation: Operation) => {\r\n    setCart((prevCart: CartProps) => {\r\n      const updatedCart = { ...prevCart };\r\n      if (updatedCart[productId]) {\r\n        if (operation === \"increase\") {\r\n          updatedCart[productId] = {\r\n            ...updatedCart[productId],\r\n            quantity: updatedCart[productId].quantity + 1,\r\n          };\r\n        } else {\r\n          updatedCart[productId] = {\r\n            ...updatedCart[productId],\r\n            quantity: updatedCart[productId].quantity - 1,\r\n          };\r\n        }\r\n      }\r\n      return updatedCart;\r\n    });\r\n  };\r\n\r\n  const getProducts = () => Object.values(cart || {});\r\n\r\n  const totalPrice = getProducts().reduce(\r\n    (accumulator, product) => accumulator + product.price * product.quantity,\r\n    0,\r\n  );\r\n\r\n  const handleCheckout = () =>\r\n    toast(\"This a demo, so the button doesn't do anything.\", {\r\n      icon: \"ℹ️\",\r\n    });\r\n\r\n  return (\r\n    <section className=\"mx-auto max-w-2xl px-4 py-5 sm:px-6 sm:py- lg:max-w-7xl lg:px-8\">\r\n      <h2 className=\"text-2xl font-bold tracking-tight text-font\">\r\n        <Trans>Cart</Trans>\r\n      </h2>\r\n      <div className=\"flow-root py-5\">\r\n        {getProducts().length === 0 ? (\r\n          <div>\r\n            <div className=\"py-6 flex justify-center\">\r\n              <p>\r\n                <Trans>The cart is empty.</Trans>\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"border-t border-gray-200 px-4 py-6 sm:px-6\">\r\n              <div className=\"mt-6 flex justify-center text-center text-sm text-font\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={navigateToShop}\r\n                  className=\"font-medium text-primary hover:text-primaryHover\"\r\n                >\r\n                  <Trans>Continue Shopping</Trans>\r\n\r\n                  <span aria-hidden=\"true\"> &rarr;</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div>\r\n            <ul role=\"list\" className=\"-my-6 divide-y divide-gray-200\">\r\n              {getProducts().map((product) => (\r\n                <li key={product.id} className=\"flex py-6\">\r\n                  <div className=\"size-24 shrink-0 overflow-hidden rounded-md border border-gray-200\">\r\n                    <img\r\n                      alt={product.name}\r\n                      src={product.picture}\r\n                      className=\"size-full object-cover\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"ml-4 flex flex-1 flex-col\">\r\n                    <div>\r\n                      <div className=\"flex justify-between text-base font-medium\">\r\n                        <Quantifier\r\n                          removeProductCallback={() =>\r\n                            handleRemoveProduct(product.id)\r\n                          }\r\n                          productId={product.id}\r\n                          handleUpdateQuantity={handleUpdateQuantity}\r\n                        />\r\n\r\n                        <p className=\"ml-4\">{product.price}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex flex-1 items-end justify-between text-sm\">\r\n                      <p>Qty {product.quantity}</p>\r\n\r\n                      <div className=\"flex\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\" button font-medium text-primary hover:text-primaryHover\"\r\n                          onClick={() => handleRemoveProduct(product.id)}\r\n                        >\r\n                          <Trans> Remove</Trans>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <div className=\"border-t border-gray-200 px-4 py-6 my-6 sm:px-6\">\r\n              <div className=\"flex justify-between text-base font-medium \">\r\n                <p>Total</p>\r\n                <p>{totalPrice} €</p>\r\n              </div>\r\n              <div className=\"mt-6 flex justify-center text-center text-sm text-gray-500\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"bg-primary hover:bg-primaryHover text-xl text-white font-semibold py-2 px-4 rounded-xl\"\r\n                  onClick={handleCheckout}\r\n                >\r\n                  Checkout\r\n                </button>\r\n              </div>\r\n              <div className=\"mt-6 flex justify-center text-center text-sm text-gray-500\">\r\n                <p>\r\n                  or{\" \"}\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={navigateToShop}\r\n                    className=\"font-medium text-primary hover:text-primaryHover\"\r\n                  >\r\n                    Continue Shopping\r\n                    <span aria-hidden=\"true\"> &rarr;</span>\r\n                  </button>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n"],"names":["Quantifier","removeProductCallback","handleUpdateQuantity","productId","value","setValue","useState","reduce","prevState","updatedValue","increase","jsxs","jsx","parseInt","e","target","Cart","cart","setCart","usePreferences","navigate","useNavigate","navigateToShop","handleRemoveProduct","prevCart","updatedCart","operation","quantity","getProducts","Object","values","totalPrice","accumulator","product","price","handleCheckout","toast","icon","_Trans","id","length","map","name","picture"],"mappings":"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"}