{"version":3,"mappings":";oEAGA,MAAMA,EAAaC,OAAK,UAAM,OAAO,0BAA0B,2BAAC,EAC1DC,EAAUD,OAAK,UAAM,OAAO,uBAA0B,2BAAC,EAKvDE,EAAU,8CAEhB,SAASC,GAAW,CAClB,KAAM,CAAEC,OAAMC,WAAYC,IAEpB,CAACC,EAAWC,CAAY,EAAIC,WAAS,EAAI,EACzC,CAACC,EAAUC,CAAW,EAAIF,WAAoB,EAAE,EAChD,CAACG,EAAOC,CAAQ,EAAIJ,WAAS,EAAK,EAElCK,EAAwBC,OAAOC,KAAKZ,GAAQ,EAAE,EAAEa,OAEtD,eAAeC,EAAUC,EAAa,CACpC,MAAMC,EAAW,MAAMC,MAAMF,CAAG,EAEhC,GAAI,CAACC,EAASE,GACZ,MAAM,IAAIC,MAAM,eAAe,EAGjC,MAAMC,EAAO,MAAMJ,EAASK,OAG5B,OAAOV,OAAOW,OAAOF,CAAI,CAC3B,CAEAG,YAAU,IAAM,CACdT,EAAUhB,CAAO,EACd0B,KAAKjB,CAAW,EAChBkB,MAAM,IAAMhB,EAAS,EAAI,CAAC,EAC1BiB,QAAQ,IAAMtB,EAAa,EAAK,CAAC,CACtC,EAAG,EAAE,EAEL,MAAMuB,EAAaC,GAA2B,CAC5CA,EAAQC,SAAW,EAEnB5B,EAAS6B,IAAyB,CAChC,GAAGA,EACH,CAACF,EAAQG,EAAE,EAAGH,GACd,CACJ,EAEMI,EAAYC,GAChBtB,OAAOC,KAAKZ,GAAQ,EAAE,EAAEkC,SAASD,EAAUE,UAAU,EAEvD,OAAI3B,EAEA4B,MAAC,MAAG,qFAGJ,EAIAjC,QACMN,EAAA,EAAO,EAIfwC,OAAC,WAAQ,UAAU,kEACjB,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAAD,MAAC,MAAG,UAAU,8CACZ,SAAAA,MAAAE,EAAA,CAAAP,GAAA,SAAuB,EACzB,EAEAK,MAACzC,GAAW,cAAAe,CAAA,CAA6B,GAC3C,EAEA0B,MAAC,OAAI,UAAU,kFACZ9B,WAASO,SAAW,SAClB,KACE,oBACDyB,EAAA,CAAAP,GAAA,SAAyC,EAAC,KAC5C,EAEAzB,EAASiC,OACPF,OAAC,WAAyB,UAAU,iBAClC,UAAAD,MAAC,OACC,IAAKR,EAAQY,QACb,IAAKZ,EAAQa,KACb,UAAU,sEAAqE,EAEjFJ,OAAC,OAAI,UAAU,4BACb,UAAAD,MAAC,OACC,SAAAA,MAAC,MAAG,UAAU,qCACXR,WAAQa,KACX,EACF,EACAJ,OAAC,KAAE,UAAU,mCACVT,YAAQc,MAAM,MACjB,GACF,QACC,OAAI,UAAU,YACb,SAAAN,MAAC,UACC,SAAUJ,EAASJ,EAAQG,EAAE,EAC7B,QAAS,IAAMJ,EAAUC,CAAO,EAChC,UAAU,cAEV,eAAAU,EAAA,CAAAP,GAAA,QAAyB,CAAC,EAC5B,EACF,IAxBYH,EAAQG,EAyBtB,CACD,EAEL,GACF,CAEJ","names":["CartWidget","lazy","Spinner","API_URL","Products","cart","setCart","usePreferences","isLoading","setIsLoading","useState","products","setProducts","error","setError","productsCount","Object","keys","length","fetchData","url","response","fetch","ok","Error","data","json","values","useEffect","then","catch","finally","addToCart","product","quantity","prevCart","id","isInCart","productId","includes","toString","jsx","jsxs","_Trans","map","picture","name","price"],"ignoreList":[],"sources":["../../src/components/Projects/Shop/Products/Products.tsx"],"sourcesContent":["import { lazy, useEffect, useState } from \"react\";\r\nimport { usePreferences } from \"../../../../hooks/usePreferences\";\r\n\r\nconst CartWidget = lazy(() => import(\"../CartWidget/CartWidget\"));\r\nconst Spinner = lazy(() => import(\"../../../Spinner/Spinner\"));\r\nimport { Trans } from \"@lingui/react/macro\";\r\n\r\nimport type { CartProps, Product } from \"../../../../types/cart\";\r\n\r\nconst API_URL = \"https://ecom-fake-api.onrender.com/products\";\r\n\r\nfunction Products() {\r\n  const { cart, setCart } = usePreferences();\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const productsCount: number = Object.keys(cart || {}).length;\r\n\r\n  async function fetchData(url: string) {\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Network error\");\r\n    }\r\n\r\n    const data = await response.json();\r\n\r\n    //We must do this because the api returns a list instead of an array\r\n    return Object.values(data) as Product[];\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData(API_URL)\r\n      .then(setProducts)\r\n      .catch(() => setError(true))\r\n      .finally(() => setIsLoading(false));\r\n  }, []);\r\n\r\n  const addToCart = (product: Product): void => {\r\n    product.quantity = 1;\r\n\r\n    setCart((prevCart: CartProps) => ({\r\n      ...prevCart,\r\n      [product.id]: product,\r\n    }));\r\n  };\r\n\r\n  const isInCart = (productId: number): boolean =>\r\n    Object.keys(cart || {}).includes(productId.toString());\r\n\r\n  if (error) {\r\n    return (\r\n      <h3>\r\n        An error occurred when fetching data. Please check the API and try\r\n        again.\r\n      </h3>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <Spinner />;\r\n  }\r\n\r\n  return (\r\n    <section className=\"mx-auto max-w-2xl px-4 py-5 sm:px-6 sm:py- lg:max-w-7xl lg:px-8\">\r\n      <div className=\"flex justify-between\">\r\n        <h2 className=\"text-2xl font-bold tracking-tight text-font\">\r\n          <Trans>Products</Trans>\r\n        </h2>\r\n\r\n        <CartWidget productsCount={productsCount} />\r\n      </div>\r\n\r\n      <div className=\"mt-6 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-4 xl:gap-x-8\">\r\n        {products.length === 0 ? (\r\n          <p>\r\n            {\" \"}\r\n            <Trans>The product list is empty.</Trans>{\" \"}\r\n          </p>\r\n        ) : (\r\n          products.map((product) => (\r\n            <article key={product.id} className=\"group relative\">\r\n              <img\r\n                src={product.picture}\r\n                alt={product.name}\r\n                className=\"aspect-square w-full rounded-md object-cover lg:aspect-auto lg:h-80\"\r\n              />\r\n              <div className=\"mt-4 flex justify-between\">\r\n                <div>\r\n                  <h3 className=\"text-m text-gray-400 font-semibold\">\r\n                    {product.name}\r\n                  </h3>\r\n                </div>\r\n                <p className=\"text-m font-medium text-gray-400\">\r\n                  {product.price} â‚¬\r\n                </p>\r\n              </div>\r\n              <div className=\"flex py-2\">\r\n                <button\r\n                  disabled={isInCart(product.id)}\r\n                  onClick={() => addToCart(product)}\r\n                  className=\"button grow\"\r\n                >\r\n                  <Trans>Add to Cart</Trans>\r\n                </button>\r\n              </div>\r\n            </article>\r\n          ))\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"],"file":"Products-DVo1Tsjq.js"}